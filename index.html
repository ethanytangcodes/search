<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ethan's Browser Portal</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
:root {
  --bg: #0e0f17;
  --panel: rgba(255, 255, 255, 0.06);
  --accent: #7289da;
  --text: #eef2ff;
  --muted: #a0acc8;
}

* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; }
body { height: 100vh; background: radial-gradient(circle at top left, #1e1f2b, #0e0f17 70%); color: white; display: flex; justify-content: center; align-items: center; overflow: hidden; position: relative; }

#tsparticles { position: fixed; top:0; left:0; width:100%; height:100%; z-index:0; }

#loadingScreen {
  position: fixed; top:0; left:0; width:100%; height:100%; background:#0e0f17; display:flex; flex-direction:column; justify-content:center; align-items:center; z-index:10;
}

.glow-ring {
  width: 80px; height: 80px; border: 6px solid transparent; border-top: 6px solid #7289da; border-radius: 50%; animation: spin 1.2s linear infinite; margin-bottom:20px; box-shadow: 0 0 15px #7289da;
}

@keyframes spin { 0% { transform: rotate(0deg);} 100% { transform: rotate(360deg);} }

#progressContainer { width: 300px; height: 12px; background: rgba(255,255,255,0.1); border-radius: 6px; overflow:hidden; margin-top: 10px; }
#progressBar { width: 0%; height: 100%; background: linear-gradient(90deg,#7289da,#5865f2); transition: width 0.2s linear; }
#loadingText { margin-top:10px; font-size: 1rem; color: #c9c9e3; }

.container {
  position: relative; z-index: 1;
  background: var(--panel);
  backdrop-filter: blur(30px) saturate(180%);
  border-radius: 24px;
  border: 1px solid rgba(255,255,255,0.08);
  padding: 3rem 3.5rem;
  width: 90%; max-width: 650px;
  text-align: center;
  box-shadow: 0 25px 70px rgba(0,0,0,0.55);
  animation: fadeIn 1s ease-out;
  display: none;
  transition: transform 0.3s ease;
}

.container.zoom { transform: scale(1.08); }

@keyframes fadeIn { from {opacity:0; transform:translateY(20px);} to {opacity:1; transform:translateY(0);} }

h1 { font-size:2.2rem; margin-bottom:0.5rem; background: linear-gradient(90deg,#7289da,#5865f2); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.greeting { font-size:1.4rem; color:#c9c9e3; margin-bottom:1rem; min-height:1.6rem; } /* keep space for typing effect */
.clock { color:#a8a8cf; font-size:1.1rem; margin-bottom:1.8rem; }

.search-box { display:flex; width:100%; background: rgba(255,255,255,0.1); border-radius:14px; overflow:hidden; transition: all 0.3s ease; border:1px solid rgba(255,255,255,0.05);}
input { flex:1; border:none; padding:1rem 1.2rem; font-size:1rem; color:white; background:transparent; outline:none;}
button { background: linear-gradient(135deg,#5865f2,#4752c4); border:none; color:white; padding:1rem 1.5rem; font-weight:600; cursor:pointer; transition:0.3s;}
button:hover { background: linear-gradient(135deg,#7289da,#5865f2); transform:scale(1.05); }

.controls { margin-top:1.5rem; display:flex; justify-content:space-between; align-items:center; gap:1rem; flex-wrap:wrap;}
select { flex:1; background: rgba(255,255,255,0.15); border:none; color:#e4e4ee; padding:0.85rem 1rem; border-radius:14px; cursor:pointer; outline:none; transition:0.3s;}
select:hover { background: rgba(255,255,255,0.25);}
.list { margin-top:1.2rem; width:100%; max-height:180px; overflow-y:auto; border-radius:14px; background: rgba(255,255,255,0.06); border:1px solid rgba(255,255,255,0.1); text-align:left; font-size:0.95rem;}
.list div { padding:0.7rem 1rem; border-bottom:1px solid rgba(255,255,255,0.08); cursor:pointer; transition:background 0.2s, transform 0.2s;}
.list div:hover { background: rgba(255,255,255,0.1); transform:translateX(6px);}
.hidden { display:none; }

.clear-btn { margin-top:0.6rem; background: rgba(240,71,71,0.25); border:none; color:#f87171; padding:0.5rem 1rem; border-radius:12px; font-size:0.9rem; cursor:pointer; transition:0.25s; }
.clear-btn:hover { background: rgba(240,71,71,0.4); }

#historyBtn { border-radius: 50px; }
</style>
</head>
<body>
<div id="tsparticles"></div>

<div id="loadingScreen">
  <div class="glow-ring"></div>
  <div id="progressContainer"><div id="progressBar"></div></div>
  <div id="loadingText">Loading 0%</div>
</div>

<div class="container" id="portalContainer">
  <h1>Ethan‚Äôs Browser Portal üåê</h1>
  <div class="greeting" id="greeting"></div>
  <div class="clock" id="clock"></div>

  <div class="search-box" id="searchBox">
    <input type="text" id="query" placeholder="Search privately..." />
    <button id="searchBtn">Go</button>
  </div>

  <div class="controls">
    <select id="engineSelect">
      <option value="https://search.brave.com/search?q=">Brave Search</option>
      <option value="https://duckduckgo.com/?q=">DuckDuckGo</option>
      <option value="https://www.ecosia.org/search?q=">Ecosia</option>
      <option value="https://www.startpage.com/do/dsearch?query=">Startpage</option>
    </select>
    <button id="historyBtn">History</button>
  </div>

  <div id="historyList" class="list hidden"></div>
  <button id="clearHistory" class="clear-btn hidden">Clear History</button>
</div>

<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
<script>
tsParticles.load("tsparticles", {
  fpsLimit:60,
  background:{color:"transparent"},
  particles:{
    number:{value:160, density:{enable:true, area:900}},
    color:{value:["#5865f2","#7289da","#99aaff"]},
    shape:{type:"circle"},
    opacity:{value:0.6, random:true},
    size:{value:{min:2,max:5}, random:true},
    move:{enable:true, speed:2.5, direction:"none", random:true, outModes:"out"},
    links:{enable:true, distance:120, color:"#7289da", opacity:0.25, width:1}
  },
  interactivity:{ events:{ onHover:{enable:true,mode:"grab"}, onClick:{enable:true,mode:"repulse"} }, modes:{ grab:{distance:150, links:{opacity:0.6}}, repulse:{distance:120,duration:0.4} } },
  detectRetina:true
});

const progressBar = document.getElementById("progressBar");
const loadingText = document.getElementById("loadingText");
const loadingScreen = document.getElementById("loadingScreen");
const portalContainer = document.getElementById("portalContainer");

let progress = 0;
function fakeLoad() {
  let delay = 41;
  if(progress===66) delay=670;
  progress++;
  progressBar.style.width = progress + "%";
  loadingText.textContent = `Loading ${progress}%`;
  if(progress<100){ setTimeout(fakeLoad, delay); }
  else { loadingScreen.style.display="none"; portalContainer.style.display="block"; startGreetingTyping(); }
}
fakeLoad();

const clock = document.getElementById("clock");
function updateClock() {
  const now = new Date();
  const time = now.toLocaleTimeString([], {hour:'2-digit', minute:'2-digit', second:'2-digit'});
  const date = now.toLocaleDateString([], {weekday:'long', month:'long', day:'numeric'});
  clock.textContent = `${date} ‚Ä¢ ${time}`;
}
setInterval(updateClock,1000);
updateClock();

const searchBtn = document.getElementById("searchBtn");
const queryInput = document.getElementById("query");
const engineSelect = document.getElementById("engineSelect");
const historyBtn = document.getElementById("historyBtn");
const historyList = document.getElementById("historyList");
const clearHistoryBtn = document.getElementById("clearHistory");
const searchBox = document.getElementById("searchBox");

queryInput.addEventListener("input", ()=>{
  portalContainer.classList.add("zoom");
});
queryInput.addEventListener("blur", ()=>{
  portalContainer.classList.remove("zoom");
});

let history = JSON.parse(localStorage.getItem("searchHistory") || "[]");
function renderHistory() {
  historyList.innerHTML = "";
  if(history.length===0) historyList.innerHTML="<div>No search history yet üïê</div>";
  else history.forEach(item=>{
    const div = document.createElement("div");
    div.textContent=item;
    div.onclick=()=>window.location.href=engineSelect.value+encodeURIComponent(item);
    historyList.appendChild(div);
  });
}

function performSearch() {
  const query=queryInput.value.trim();
  if(!query) return;
  history.unshift(query);
  if(history.length>25) history.pop();
  localStorage.setItem("searchHistory",JSON.stringify(history));
  window.location.href=engineSelect.value+encodeURIComponent(query);
}

searchBtn.onclick=performSearch;
queryInput.addEventListener("keypress", e=>{if(e.key==="Enter") performSearch();});

historyBtn.onclick=()=>{
  const showing=!historyList.classList.contains("hidden");
  historyList.classList.toggle("hidden",showing);
  clearHistoryBtn.classList.toggle("hidden",showing);
  if(!showing) renderHistory();
};

clearHistoryBtn.onclick=()=>{ if(confirm("Clear all search history?")){history=[]; localStorage.removeItem("searchHistory"); renderHistory();} };

// Greeting typing effect
function startGreetingTyping() {
  const greetings = ["i see how it is","no cap skibidi fr","killing time in class?","MEGAKNIGHT","...","good night","nobody asked","shhh","made by ethan"];
  const greetingText = greetings[Math.floor(Math.random()*greetings.length)];
  const greetingEl = document.getElementById("greeting");
  greetingEl.textContent = "";
  let i = 0;
  function typeLetter() {
    if(i < greetingText.length){
      greetingEl.textContent += greetingText[i];
      i++;
      setTimeout(typeLetter, 120);
    }
  }
  typeLetter();
}
</script>
</body>
</html>
